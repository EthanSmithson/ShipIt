"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[56],{3056:(j,u,a)=>{a.r(u),a.d(u,{LoginPage:()=>y});var e=a(3953),d=a(177),n=a(4341),m=a(8404);class E{constructor(t){this.formBuilder=t}createForm(){return this.formBuilder.group({email:["",[n.k0.required,n.k0.email]],password:["",[n.k0.required]]})}}var h=a(1626);let p=(()=>{var o;class t{constructor(s){this.http=s,this.baseUrl="http://localhost:6868/"}loginUser(s){return JSON.stringify(s),this.http.get(this.baseUrl+`api/users/login/${s.email}/${s.password}`,{headers:{"content-type":"application/json"}})}isConfirmed(s){return JSON.stringify(s),this.http.get(this.baseUrl+`api/users/login/${s.email}`,{headers:{"content-type":"application/json"}})}}return(o=t).\u0275fac=function(s){return new(s||o)(e.KVO(h.Qq))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),t})(),b=(()=>{var o;class t{constructor(s){this.http=s,this.baseUrl="http://localhost:6868/"}checkUserExists(s){return console.log(s),this.http.get(this.baseUrl+`api/users/find/${s.email}`,{headers:{"content-type":"application/json"}})}sendRestEmail(s){const r=JSON.stringify(s);return this.http.post(this.baseUrl+"resetEmail",r,{headers:{"content-type":"application/json"}})}}return(o=t).\u0275fac=function(s){return new(s||o)(e.KVO(h.Qq))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),t})();var v=a(8986);const F=["removeEmailError"],_=["removePasswordError"];function R(o,t){1&o&&(e.j41(0,"ion-label",12),e.EFF(1,"Email is required"),e.k0s())}function k(o,t){1&o&&(e.j41(0,"ion-label",12),e.EFF(1,"Email is invalid"),e.k0s())}function L(o,t){if(1&o&&(e.j41(0,"ion-label",12,0),e.EFF(2),e.k0s()),2&o){const l=e.XpG();e.R7$(2),e.JRh(l.emailError.undefined)}}function P(o,t){if(1&o&&(e.j41(0,"ion-label",12,0),e.EFF(2),e.k0s()),2&o){const l=e.XpG();e.R7$(2),e.JRh(l.userDoesNotExists)}}function N(o,t){1&o&&(e.j41(0,"ion-label",12),e.EFF(1,"Password is required"),e.k0s())}function U(o,t){if(1&o&&(e.j41(0,"ion-label",12,1),e.EFF(2),e.k0s()),2&o){const l=e.XpG();e.R7$(2),e.JRh(l.passwordError.undefined)}}let y=(()=>{var o;class t{constructor(s,i,r){this.router=s,this.formBuilder=i,this.renderer=r,this.thisEmailError=e.aKT,this.thisPasswordError=e.aKT,this.form=n.gE,this.dataService=(0,e.WQX)(p),this.emailReset=(0,e.WQX)(b)}ngOnInit(){var s;let i;this.form=new E(this.formBuilder).createForm(),i=null===(s=this.form.get("email"))||void 0===s?void 0:s.valid,console.log(this.form)}goToRegister(){this.router.navigateByUrl("/register")}goToHome(){this.router.navigateByUrl("/home")}submitLogin(s){this.dataService.loginUser(s).subscribe(i=>{this.data=i,console.log(this.data),1==this.data.status?this.dataService.isConfirmed(s).subscribe(r=>{this.isConfirmed=r.status,console.log("Am I confirmed "+this.isConfirmed),1==this.isConfirmed?this.router.navigateByUrl("/home"):(this.userDoesNotExists="User is not Confirmed!",this.hideEmailError(this.userDoesNotExists))}):2==this.data.status?(this.userDoesNotExists="This User Does Not Exist!",this.hideEmailError(this.userDoesNotExists)):(console.log(this.data.errors[0]),this.emailError=this.data.errors[0],this.passwordError=this.data.errors[1])})}hideEmailError(s){setTimeout(()=>{this.removeUserDoesNotExists=1},3e3)}resetEmail(s){this.emailReset.checkUserExists(s).subscribe(i=>{this.checkEmailResetExists=i.status,console.log(this.checkEmailResetExists),1==this.checkEmailResetExists?this.emailReset.sendRestEmail(s).subscribe(r=>{this.data=r}):(this.userDoesNotExists="User Does Not Exist!",this.hideEmailNotExistsError(this.userDoesNotExists))})}hideEmailNotExistsError(s){setTimeout(()=>{this.removeUserDoesNotExists=1},3e3)}}return(o=t).\u0275fac=function(s){return new(s||o)(e.rXU(v.Ix),e.rXU(n.ok),e.rXU(e.sFG))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-login"]],viewQuery:function(s,i){if(1&s&&(e.GBs(F,5),e.GBs(_,5)),2&s){let r;e.mGM(r=e.lsd())&&(i.thisEmailError=r.first),e.mGM(r=e.lsd())&&(i.thisPasswordError=r.first)}},standalone:!0,features:[e.aNF],decls:28,vars:9,consts:[["removeEmailError",""],["removePasswordError",""],["color","success"],[1,"flex-center"],[3,"ngSubmit","formGroup"],["label","Email","formControlName","email","labelPlacement","floating","type","email","color","success"],["class","errorLabel","color","danger",4,"ngIf"],["color","danger","class","errorLabel",4,"ngIf"],["label","Password","formControlName","password","labelPlacement","floating","color","success","type","password"],["color","dark","size","full","fill","clear",3,"click","disabled"],["color","success","size","full","type","submit",3,"disabled"],["color","success","fill","clear","size","full",3,"click"],["color","danger",1,"errorLabel"]],template:function(s,i){if(1&s&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",2),e.EFF(3,"Fresh Finds"),e.k0s()()(),e.j41(4,"ion-content")(5,"div",3)(6,"form",4),e.bIt("ngSubmit",function(){return i.submitLogin(i.form.value)}),e.j41(7,"ion-card")(8,"ion-card-header")(9,"ion-card-title",2),e.EFF(10,"Login"),e.k0s()(),e.j41(11,"ion-card-content")(12,"ion-item"),e.nrm(13,"ion-input",5),e.k0s(),e.DNE(14,R,2,0,"ion-label",6)(15,k,2,0,"ion-label",6)(16,L,3,1,"ion-label",7)(17,P,3,1,"ion-label",7),e.j41(18,"ion-item"),e.nrm(19,"ion-input",8),e.k0s(),e.DNE(20,N,2,0,"ion-label",6)(21,U,3,1,"ion-label",6),e.j41(22,"ion-button",9),e.bIt("click",function(){return i.resetEmail(i.form.value)}),e.EFF(23," forgot email/password "),e.k0s(),e.j41(24,"ion-button",10),e.EFF(25," Login "),e.k0s(),e.j41(26,"ion-button",11),e.bIt("click",function(){return i.goToRegister()}),e.EFF(27," Register "),e.k0s()()()()()()),2&s){let r,g,c,f;e.R7$(6),e.Y8G("formGroup",i.form),e.R7$(8),e.Y8G("ngIf",i.form.get("email").touched&&(null==(r=i.form.get("email").errors)?null:r.required)),e.R7$(),e.Y8G("ngIf",i.form.get("email").touched&&(null==(g=i.form.get("email").errors)?null:g.email)),e.R7$(),e.Y8G("ngIf",i.emailError&&!i.removeEmailError),e.R7$(),e.Y8G("ngIf",i.userDoesNotExists&&!i.removeEmailError&&!(null!=(c=i.form.get("email").errors)&&c.required)&&!(null!=(c=i.form.get("email").errors)&&c.email)&&!i.removeUserDoesNotExists),e.R7$(3),e.Y8G("ngIf",i.form.get("password").touched&&(null==(f=i.form.get("password").errors)?null:f.required)),e.R7$(),e.Y8G("ngIf",i.passwordError),e.R7$(),e.Y8G("disabled",!i.form.get("email").valid),e.R7$(2),e.Y8G("disabled",!i.form.valid)}},dependencies:[m.W9,m.eU,m.BC,m.ai,d.MD,d.bT,n.YN,n.qT,n.BC,n.cb,m.$w,n.X1,n.j4,n.JD,m.Jm],styles:["ion-button[color=dark][_ngcontent-%COMP%]{text-transform:initial}"]}),t})()}}]);